<div class="container">
  <div class="converter">
    <form [formGroup]="converterForm" (ngSubmit)="onSubmit()">
      <h1 class="title">Cryptocurrency Converter Calculator</h1>
      <div class="top-row">
        <div class="input">
          <i class="fa-solid fa-coins"></i>
          <input type="text" placeholder="Enter amount" formControlName="amount" (keyup)="setAmount()" autofocus>
          <img src="" alt="" class="input-icon">
        </div>
      </div>
      <div class="selector-container">
        <div class="menu">
          <div class="input-dropdown">
            <img src="" alt="" class="input-icon">
            <input type="text" placeholder="From BTC" formControlName="from">
            <i class="fa-regular fa-square-caret-down"></i>
            <div class="menu-content">
              <button type="button" 
              *ngFor="let crypto of cryptoMap$ | async" 
              (click)="fromCrypto(crypto)"
              >{{ crypto.name }} ({{ crypto.symbol }})</button>
            </div>
          </div>
        </div>
        <div class="menu">
          <div class="input-dropdown">
            <img src="" alt="" class="input-icon">
            <input type="text" placeholder="To USD" formControlName="to">
            <i class="fa-regular fa-square-caret-down"></i>
            <div class="menu-content">
              <button type="button" 
              *ngFor="let fiat of fiatMap$ | async" 
              (click)="toFiat(fiat)"
              >{{ fiat.name }} "{{fiat.sign}}" ({{ fiat.symbol }})</button>
            </div>
          </div>
        </div>
      </div>
      <div class="button-div">
        <button type="submit" class="button" [disabled]="!converterForm.valid">
          <i class="fa-solid fa-arrows-rotate"></i> Convert</button>
      </div>
      <div class="output">
        <h4 class="output-field" *ngIf="result$ | async">
          {{ (result$ | async)!.amount }}
          {{ (result$ | async)!.name }}
          ({{ (result$ | async)!.symbol }}) =
          {{ (result$ | async)!.quote[(to$ | async)!.id].price | number:'1.2-2' }}
          {{ (to$ | async)!.name }}
          "{{ (to$ | async)!.sign }}"
          ({{ (to$ | async)!.symbol }})
        </h4>
      </div>
    </form>
  </div>
</div>
<div class="spinner-container" *ngIf="(isLoading$ | async)">
  <app-loading-spinner class="spinner"></app-loading-spinner>
</div>